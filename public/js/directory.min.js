var config=["$stateProvider","$httpProvider","$urlRouterProvider","$authProvider","$locationProvider","envServiceProvider","ezfbProvider",function(i,e,r,s,o,d,t){i.state("school",{url:"/",controller:"dirIndexCtrl",templateUrl:"views/directory/school.list.html"}).state("schoolDetail",{url:"/{id:[a-zA-Z1-9.-]*}",controller:"dirDetailCtrl",templateUrl:"views/directory/school.detail.html"}),d.config({domains:{development:["localhost","kisikisi.dev","dir.kisikisi.dev"],production:["103.11.74.10","kisikisi.id","dir.kisikisi.id"]},vars:{development:{site:"//kisikisi.dev/",api:"//api.kisikisi.dev/",file:"//files.kisikisi.dev/",dir:"//dir.kisikisi.dev/"},production:{site:"//kisikisi.id/",api:"//api.kisikisi.id/",dir:"//dir.kisikisi.id/",file:"//files.kisikisi.id/"}}}),d.check(),o.html5Mode(!0),r.otherwise("/"),s.loginUrl="/login",t.setInitParams({appId:"135688693164869"})}];
var dirDetailCtrl=["$http","$scope","$location","$sce","$stateParams","Notification",function(t,i,a,e,s,l){t.get(i.env.api+"school/"+s.id).success(function(t){i.detail=t.detail[0],i.detail.description=e.trustAsHtml(t.detail[0].description),i.detail.data=e.trustAsHtml(t.detail[0].data),i.onDetail=!0})}];
var dirIndexCtrl=["$http","$scope","$rootScope","$location","Notification","envService",function(o,s,c,l,t,e){s.schools=[],s.scrollBusy=!1,s.limit=12,s.after=0,s.nextPage=function(){s.scrollBusy=!0,o.get(s.env.api+"school/scroll/"+s.after+"/"+s.limit).success(function(o){for(var c=0;c<o.schools.length;c++)s.schools.push(o.schools[c]);s.after=o.schools[o.schools.length-1].id,s.scrollBusy=!1})}}];
var dirCtrl=["$http","$scope","$rootScope","$location","Notification","envService",function(e,o,i,t,c,n){i.env=n.read("all"),$(".ui.sidebar").sidebar("toggle"),$(".ui.sidebar").sidebar("attach events","#mainNavToggle"),o.modalTemplate="views/directory/school.detail.html",o.indexSearch=function(e,o){return e.map(function(e){return e.id}).indexOf(o)},o.filterSchool=function(){e.get(o.env.api+"school/form").success(function(e){o.schoolTypes=e.schoolTypes,o.cities=e.cities,o.provinces=e.provinces})},o.filterSchool(),o.detailSchool=function(i){o.modalTemplate="",e.get(o.env.api+"school/"+i).success(function(e){o.detail=e.detail[0],o.modalTemplate="views/directory/school.detail.html",$(".ui.modal").modal({observeChanges:!0}).modal("show")})};var a=this;o.$watch(function(){return a.href},function(){a.rendered=!1})}];
app=angular.module("kisiDirApp",["ui.router","ngSanitize","satellizer","ngTouch","superswipe","environment","ui-notification","ngTagsInput","ezfb","infinite-scroll"]),app.config(config).controller("dirCtrl",dirCtrl).controller("dirIndexCtrl",dirIndexCtrl).controller("dirDetailCtrl",dirDetailCtrl).directive("uiRating",function(){return function(i,n,t){$(n).rating()}}).directive("ukSticky",function(){return function(i,n,t){UIkit.sticky(n)}}).directive("uiTab",function(){return function(i,n,t){$(n).tab()}});
