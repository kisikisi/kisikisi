var config=["$stateProvider","$httpProvider","$urlRouterProvider","$authProvider","$locationProvider","envServiceProvider","ezfbProvider",function(i,e,s,r,o,t,l){i.state("course",{url:"/",controller:"courseIndexCtrl",templateUrl:"views/course/course.list.html"}).state("courseDetail",{url:"/{id:[a-zA-Z1-9.-]*}",controller:"courseDetailCtrl",templateUrl:"views/course/course.detail.html"}),t.config({domains:{development:["localhost","kisikisi.dev","learning.kisikisi.dev"],production:["103.11.74.10","kisikisi.id","learning.kisikisi.id"]},vars:{development:{site:"//kisikisi.dev/",api:"//api.kisikisi.dev/",file:"//files.kisikisi.dev/",course:"//learning.kisikisi.dev/"},production:{site:"//kisikisi.id/",api:"//api.kisikisi.id/",course:"//learning.kisikisi.id/",file:"//files.kisikisi.id/"}}}),t.check(),o.html5Mode(!0),s.otherwise("/"),r.loginUrl="/login",l.setInitParams({appId:"135688693164869"})}];
var courseDetailCtrl=["$http","$scope","$location","$sce","$stateParams","Notification",function(t,e,i,s,a,c){t.get(e.env.api+"course/"+a.id).success(function(t){e.detail=t.detail,e.detail.description=s.trustAsHtml(t.detail.description),e.detail.embed=s.trustAsResourceUrl(t.detail.embed),e.onDetail=!0})}];
var courseIndexCtrl=["$http","$scope","$rootScope","$location","Notification","envService",function(o,t,c,e,i,n){}];
var courseCtrl=["$http","$scope","$rootScope","$state","$sce","$location","Notification","envService",function(e,o,t,r,n,s,c,a){t.env=a.read("all"),o.courses=[],o.scrollBusy=!1,o.limit=12,o.after=0,o.onSearch=!1,o.filter={},o.url=s.absUrl(),o.$on("$includeContentLoaded",function(e){o.modal1=$("#siteModal").modal(),o.modal2=$("#basicModal").modal()}),o.indexSearch=function(e,o){return e.map(function(e){return e.id}).indexOf(o)},o.toggleSearch=function(){0==o.onSearch?o.onSearch=!0:o.onSearch=!1},o.searchCourse=function(e){o.after=0,o.courses=[],o.nextPage(),o.filter=e,o.onSearch=!1,r.go("course")},o.nextPage=function(){o.scrollBusy=!0,e.get(o.env.api+"course/scroll/"+o.after+"/"+o.limit,{params:o.filter}).success(function(e){for(var t=0;t<e.courses.length;t++)o.courses.push(e.courses[t]);e.courses.length>0&&(o.after=e.courses[e.courses.length-1].id,o.scrollBusy=!1)})},o.loginForm=function(){o.modal2.modal("show")},o.detailCourse=function(t){e.get(o.env.api+"course/"+t).success(function(e){o.detail=e.detail,o.detail.description=n.trustAsHtml(e.detail.description),o.detail.embed=n.trustAsResourceUrl(e.detail.embed),o.modal1.modal("show")})};var i=this;o.$watch(function(){return i.href},function(){i.rendered=!1})}];
app=angular.module("kisiApp",["ui.router","ngSanitize","satellizer","ngTouch","superswipe","environment","ui-notification","ngTagsInput","ezfb","infinite-scroll"]),app.config(config).controller("courseCtrl",courseCtrl).controller("courseIndexCtrl",courseIndexCtrl).controller("courseDetailCtrl",courseDetailCtrl).directive("uiRating",function(){return function(n,i,r){$(i).rating()}}).directive("uiTab",function(){return function(n,i,r){$(i).tab()}}).directive("uiSidebar",function(){return function(n,i,r){$(i).sidebar("toggle"),$(i).sidebar("attach events",r.trigger)}}).directive("uiDropdown",function(){return function(n,i,r){$(i).dropdown({keepOnScreen:!1})}}).directive("uiAccordion",function(){return function(n,i,r){$(i).accordion()}});
